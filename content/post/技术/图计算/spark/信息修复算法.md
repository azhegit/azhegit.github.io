---
categories:
- 技术
- 图计算
date: '2018-12-24 15:06:27+08:00'
tags:
- spark
thumbnailImage: //www.azheimage.top/markdown-img-paste-20190110144117219.png
title: 信息修复算法
---
失联信息修复功能设计
<!--more-->

#### 需求目标：
1. 演示复杂网络的管理功能；(已满足)
2. 演示如何使用关系图谱识别反欺诈团伙；（已满足-设备聚集）
3. 演示如何使用关系图谱修复失联客户。（新增功能）

### 失联修复（新增功能）
#### 原始数据：
- ##### 原始数据字段(信贷申请)
  字段|含义|nodeType
  |-|-|-|
  card|身份证号|1
  phone|联系人手机号|4
  pressPhone|紧急联系人手机号|13
  relaPhone|亲属手机号|14
  homeAddr|家庭地址|7
  company|公司名称|8
  companyAddr|公司地址|18
  deviceId|设备号|5
- ##### 原始数据字段(通话记录)
  字段|含义|nodeType
  |-|-|-|
  srcPhone|呼叫号码|22
  tarPhone|被叫号码|22
- ##### 建网思路：
  1. 所属关系：
      - 身份证->联系人手机号
      - 身份证->紧急联系人手机号
      - 身份证->亲属手机号
      - 身份证->家庭地址
      - 身份证->公司名称
      - 公司名称->公司地址
  2. 设备关系：
      - 手机号->设备ID
  3. 通话关系：
      - 呼叫号码->被叫号码

#### 号码推荐：

##### 目标：
输入失联手机号->输出top3手机号

##### 计算方案
通过通话记录，计算失联手机号(sP)与紧急联系人手机号(pP)、亲属手机号(rP)、陌生号码(mP)之间的通话次数C计算权重。
>对于紧急联系人手机号、亲属手机号加权系数分别是：a、b
对于紧急联系人手机号、亲属手机号基准分数分别是：A、B
a,b权重,A,B基准目前还未定义，算法可以先按照a=3,b=2,A=20,B=10来实现，后续数据出来之后再做调整

目标点n与失联点sP相关联的次数为不同节点的权重W(n),有t个陌生号码,目标点n的得分S(n)。
1. 先计算权重：
    - 客户手机号与紧急联系人手机号号(pP)权重:
    <!-- ![](WpP.png) -->
    $W(pP)=a*C(pP)+A$
    - 客户手机号与亲属手机号(rP)权重:
    <!-- ![](WrP.png) -->
    $W(rP)=a*C(pP)+B$
    - 客户手机号与陌生人手机号(rP)权重:
    <!-- ![](WmP.png) -->
    $W(mP)=C(pP)$
2. 再计算目标客户手机号与目标手机号n的分数：
    <!-- ![](Sn.png) -->
    $S(n) = \frac{W(n)}{\sum_{i=1}^{t}{w(mP)_i}+W(pP)+W(rP)}$

3. 将计算分数最终结果排序取Top3对应的手机号码，即为失联手机号推荐的3个手机号
